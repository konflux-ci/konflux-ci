commit 3aa27bb90b3fbd335f713bd6cfdf4a019276cfc7
Author: Gal Ben Haim <gbenhaim@redhat.com>
Date:   Tue Dec 30 11:55:18 2025 +0200

    fix(customization): fix strategic merge bugs causing invalid deployments
    
    Fix two critical bugs in the strategic merge implementation that caused
    invalid Kubernetes deployments:
    
    1. EnvVar value/valueFrom conflict (merge.go):
       When merging container env vars, `json.Unmarshal` into an existing
       struct would preserve stale pointer fields. If the base container had
       env vars with `valueFrom` (secrets) and the overlay added env vars
       with `value`, the resulting env vars could have BOTH fields set,
       which Kubernetes rejects as invalid.
    
       Fix: Unmarshal into a new zero-value struct first, then copy it back.
    
    2. Container deletion on pod-level merge (pod.go):
       When applying pod-level customizations (like ServiceAccountName),
       the overlay PodSpec had `Containers: nil`, which serializes to
       `"containers": null` in JSON. Strategic merge interprets `null` as
       "delete this field", causing all containers to be removed.
    
       Fix: Always copy containers from the template to the overlay before
       the strategic merge to preserve them.
    
    Also adds:
    - Regression tests for both bugs in merge_test.go and pod_test.go
    - Test assertions in konfluxui_customization_test.go to verify oauth2-proxy
      env vars don't have conflicting value/valueFrom fields
    
    Assisted-By: Cursor
    Signed-off-by: Gal Ben Haim <gbenhaim@redhat.com>

commit 2ab18f7440f26dd8df91d6f809c23239bfed5023
Author: Gal Ben Haim <gbenhaim@redhat.com>
Date:   Tue Dec 30 10:02:30 2025 +0200

    Configure oauth2-proxy in runtime
    
    Configure oauth2-proxy in runtime using environment variables.
    This is needed since its configuration are dependent on the environment,
    for example if ingress is used or not.
    
    Signed-off-by: Gal Ben Haim <gbenhaim@redhat.com>

commit cec29479f55b6f80f7d45707c44bb50eadc98b33
Author: Gal Ben Haim <gbenhaim@redhat.com>
Date:   Mon Dec 29 16:26:22 2025 +0200

    Remove runAsUser 1001 from UI deployments
    
    For the init container that generate the nginx config, replace
    the image from ubi to the konflux-ui image, since ubi requires to run
    as root by default, and the konflux-ui image has the basic utilities
    we need for generating the nginx config.
    
    Signed-off-by: Gal Ben Haim <gbenhaim@redhat.com>
