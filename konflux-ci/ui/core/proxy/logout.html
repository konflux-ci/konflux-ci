<!DOCTYPE html>
<html>
    <head>
        <title>Example After Login</title>
    </head>
    <body>
        <label>User Email: </label>
        <code id="email"></code>
        </br>
        <p>This should log you out</p>
        <a href="/oauth2/sign_out">Logout</a>
    </body>
    <script>
        async function setEmail() {
            const url = "/oauth2/userinfo";
            try {
                const response = await fetch(url);
                if (!response.ok) {
                throw new Error(`Response status: ${response.status}`);
                }

                const json = await response.json();
                console.log(json);
                document.getElementById("email").innerHTML = json.email

            } catch (error) {
                console.error(error.message);
            }
        }
        setEmail()
    </script>
</html>
